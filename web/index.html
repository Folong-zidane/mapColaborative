<!DOCTYPE html>
<html>
<head>
    <title>üó∫Ô∏è OSM Cameroun - Tuiles Personnalis√©es</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        #map { height: 100vh; }
        .info { 
            position: absolute; top: 10px; right: 10px; 
            background: white; padding: 15px; border-radius: 8px; 
            z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .status { color: green; font-weight: bold; }
    </style>
</head>
<body>
    <div class="info">
        <h3>üá®üá≤ Cameroun OSM</h3>
        <p class="status" id="status">‚è≥ Test serveur...</p>
        <p><small>Tuiles personnalis√©es</small></p>
    </div>
    <div id="map"></div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Carte du Cameroun
        var map = L.map('map').setView([7.3697, 12.3547], 6);
        
        // Tester d'abord TES tuiles personnalis√©es
        var customTileUrl = 'http://localhost:8080/tile/{z}/{x}/{y}.png';
        var fallbackTileUrl = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';
        
        // Utiliser directement OpenStreetMap (comme avant)
        L.tileLayer(fallbackTileUrl, {
            maxZoom: 18,
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);
        document.getElementById('status').innerHTML = '‚úÖ OpenStreetMap (vraie carte)';
        document.getElementById('status').style.color = 'green';
        
        // Villes principales du Cameroun
        var cities = [
            {name: 'Yaound√©', lat: 3.8667, lng: 11.5167, pop: '2.8M'},
            {name: 'Douala', lat: 4.0511, lng: 9.7679, pop: '3.7M'},
            {name: 'Garoua', lat: 9.3265, lng: 13.3958, pop: '436K'},
            {name: 'Bamenda', lat: 5.9597, lng: 10.1453, pop: '2M'},
            {name: 'Maroua', lat: 10.5906, lng: 14.3197, pop: '319K'},
            {name: 'Bafoussam', lat: 5.4737, lng: 10.4158, pop: '347K'}
        ];
        
        cities.forEach(function(city) {
            L.marker([city.lat, city.lng])
                .addTo(map)
                .bindPopup('<b>' + city.name + '</b><br/>Population: ' + city.pop);
        });
        
        // Afficher les coordonn√©es de tuile au clic (debug)
        map.on('click', function(e) {
            var zoom = map.getZoom();
            var tileX = Math.floor((e.latlng.lng + 180) / 360 * Math.pow(2, zoom));
            var tileY = Math.floor((1 - Math.log(Math.tan(e.latlng.lat * Math.PI / 180) + 1 / Math.cos(e.latlng.lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom));
            
            L.popup()
                .setLatLng(e.latlng)
                .setContent('üîç Debug Tuile<br/>Z:' + zoom + ' X:' + tileX + ' Y:' + tileY + '<br/>Lat: ' + e.latlng.lat.toFixed(4) + '<br/>Lng: ' + e.latlng.lng.toFixed(4))
                .openOn(map);
        });
    </script>
</body>
</html>